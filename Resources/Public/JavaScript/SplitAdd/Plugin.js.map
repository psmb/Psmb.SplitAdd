{
  "version": 3,
  "sources": ["../../../Private/SplitAdd/node_modules/@neos-project/neos-ui-extensibility/src/manifest.ts", "../../../Private/SplitAdd/node_modules/@neos-project/neos-ui-extensibility/src/createConsumerApi.ts", "../../../Private/SplitAdd/node_modules/@neos-project/neos-ui-extensibility/src/readFromConsumerApi.ts", "../../../Private/SplitAdd/node_modules/@neos-project/neos-ui-extensibility/src/registry/AbstractRegistry.ts", "../../../Private/SplitAdd/node_modules/@neos-project/positional-array-sorter/src/positionalArraySorter.ts", "../../../Private/SplitAdd/node_modules/@neos-project/neos-ui-extensibility/src/registry/SynchronousRegistry.ts", "../../../Private/SplitAdd/node_modules/@neos-project/neos-ui-extensibility/src/registry/SynchronousMetaRegistry.ts", "../../../Private/SplitAdd/node_modules/@neos-project/neos-ui-extensibility/src/registry/index.ts", "../../../Private/SplitAdd/node_modules/@neos-project/neos-ui-extensibility/src/index.ts", "../../../Private/SplitAdd/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/ckeditor5-exports/index.js", "../../../Private/SplitAdd/src/splitPlugin.js", "../../../Private/SplitAdd/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/react/index.js", "../../../Private/SplitAdd/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/prop-types/index.js", "../../../Private/SplitAdd/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/react-ui-components/index.js", "../../../Private/SplitAdd/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-decorators/index.js", "../../../Private/SplitAdd/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-ckeditor5-bindings/index.js", "../../../Private/SplitAdd/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/react-redux/index.js", "../../../Private/SplitAdd/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-redux-store/index.js", "../../../Private/SplitAdd/src/dom.js", "../../../Private/SplitAdd/src/SplitAddButton.js", "../../../Private/SplitAdd/src/manifest.js", "../../../Private/SplitAdd/src/index.js"],
  "sourcesContent": [null, null, null, null, null, null, null, null, null, null, "import {Plugin, Command} from 'ckeditor5-exports';\n\nclass SplitCommand extends Command {\n    execute(callback) {\n        const editor = this.editor;\n        const range = editor.model.document.selection.getFirstRange();\n        const element = range.start.parent;\n        editor.model.change(writer => {\n            const marker = writer.createElement('paragraph');\n            writer.insertText('###NEOS_SPLIT###', marker, 'end');\n            writer.insert(marker, element, 'after');\n            const content = editor.getData();\n            const [contentBefore, contentAfter] = content.split('<p>###NEOS_SPLIT###</p>');\n            editor.setData(contentBefore);\n            const {contextPath, propertyName, nodeType} = editor.neos;\n            callback({contentBefore, contentAfter, contextPath, propertyName, nodeType});\n        });\n    }\n}\n\nexport default class Split extends Plugin {\n    static get pluginName() {\n        return 'Split';\n    }\n    init() {\n        this.editor.commands.add('neosSplit', new SplitCommand(this.editor));\n    }\n}\n", null, null, null, null, null, null, null, "// TODO: would be nice to expose this stuff from Neos\nconst getGuestFrameDocument = () => {\n    return document.getElementsByName('neos-content-main')[0].contentDocument;\n};\nconst findInGuestFrame = selector =>\n    getGuestFrameDocument().querySelector(selector);\nconst findNodeInGuestFrame = (contextPath, fusionPath) => fusionPath ? findInGuestFrame(\n    `[data-__neos-node-contextpath=\"${contextPath}\"][data-__neos-fusion-path=\"${fusionPath}\"]`\n) : findInGuestFrame(\n    `[data-__neos-node-contextpath=\"${contextPath}\"]`\n);\nconst closestNodeInGuestFrame = el => {\n    if (!el || !el.dataset) {\n        // el.dataset is not existing for window.document; and we need to prevent this case from happening.\n        return null;\n    }\n\n    return el.dataset.__neosNodeContextpath ? el : closestNodeInGuestFrame(el.parentNode);\n};\n\nexport const calculateDomAddresses = (contextPath, fusionPath) => {\n    const element = findNodeInGuestFrame(contextPath, fusionPath);\n    const parentElement = element ? closestNodeInGuestFrame(element.parentNode) : null;\n\n    return {\n        siblingDomAddress: {\n            contextPath,\n            fusionPath\n        },\n        parentDomAddress: parentElement ? {\n            contextPath: parentElement.getAttribute('data-__neos-node-contextpath'),\n            fusionPath: parentElement.getAttribute('data-__neos-fusion-path')\n        } : {\n                contextPath: parentNodeContextPath(contextPath),\n                fusionPath: null\n            }\n    };\n};\n", "import React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport {IconButton} from '@neos-project/react-ui-components';\nimport {neos} from '@neos-project/neos-ui-decorators';\n\nimport {executeCommand} from '@neos-project/neos-ui-ckeditor5-bindings';\nimport {connect} from 'react-redux';\nimport {actions} from '@neos-project/neos-ui-redux-store';\nimport {calculateDomAddresses} from './dom';\n\n@connect(state => ({\n    fusionPath: state.cr.nodes.focused.fusionPath,\n}), {\n    persistChanges: actions.Changes.persistChanges,\n    commenceNodeCreation: actions.CR.Nodes.commenceCreation\n})\n@neos(globalRegistry => ({\n    i18nRegistry: globalRegistry.get('i18n')\n}))\nexport default class SplitAddButton extends PureComponent {\n    static propTypes = {\n        i18nRegistry: PropTypes.object,\n        tooltip: PropTypes.string\n    };\n    handleSplit = ({contentAfter, contextPath, propertyName, nodeType}) => {\n        this.props.persistChanges([\n            {\n                type: 'Neos.Neos.Ui:CreateAfter',\n                subject: contextPath,\n                payload: {\n                    ...calculateDomAddresses(contextPath, this.props.fusionPath),\n                    nodeType: nodeType.name,\n                    data: {\n                        properties: {\n                            [propertyName]: contentAfter\n                        }\n                    }\n                }\n            }\n        ]);\n        this.props.commenceNodeCreation(contextPath, this.props.fusionPath);\n    };\n    handleClick = () => {\n        executeCommand('neosSplit', this.handleSplit);\n    };\n    render() {\n        const props = {\n            onClick: this.handleClick,\n            isActive: Boolean(this.props.isActive),\n            title: this.props.i18nRegistry.translate(this.props.tooltip),\n            icon: this.props.icon\n        };\n        return <IconButton {...props} />;\n    }\n}\n", "import manifest from '@neos-project/neos-ui-extensibility';\nimport SplitPlugin from './splitPlugin';\nimport SplitAddButton from './SplitAddButton';\n\nconst addPlugin = (Plugin, isEnabled) => (ckEditorConfiguration, options) => {\n    if (!isEnabled || isEnabled(options.editorOptions, options)) {\n        ckEditorConfiguration.plugins = ckEditorConfiguration.plugins || [];\n        return {\n            ...ckEditorConfiguration,\n            plugins: [\n                ...(ckEditorConfiguration.plugins ?? []),\n                Plugin,\n            ]\n        };\n    }\n    return ckEditorConfiguration;\n};\n\nmanifest('Psmb.SplitAdd:SplitAdd', {}, globalRegistry => {\n    const richtextToolbar = globalRegistry.get('ckEditor5').get('richtextToolbar');\n\n    richtextToolbar.set('splitAdd', {\n        commandName: 'neosSplit',\n        component: SplitAddButton,\n        icon: 'plus-square',\n        tooltip: 'Create new node after paragraph',\n        isVisible: editorOptions => editorOptions?.formatting?.splitAdd,\n    }, 'before strong');\n\n    const config = globalRegistry.get('ckEditor5').get('config');\n    config.set('splitAdd', addPlugin(SplitPlugin));\n});\n", "require('./manifest.js');\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;ACCA;;;;;;;ACDc,WAAP,oBAAqC,KAAW;AACnD,WAAO,IAAI,SAAe;AACtB,UAAK,OAAe,qBAAqB,KAAM,OAAe,qBAAqB,EAAE,IAAI,GAAG,EAAE,GAAG;AAC7F,eAAQ,OAAe,qBAAqB,EAAE,IAAI,GAAG,EAAE,EAAE,GAAG,IAAI;;AAGpE,YAAM,IAAI,MAAM,8EAA+E;IACnG;EACJ;AARA;;;;;;ACAA;;;;;;ACgCA;;;;;;AChCA;;;AACA;;;;;ACDA;;;;;;;ACAA;;;AACA;;;;;ACDA,MAOA;AAPA;;;AACA;AACA;AAKA,MAAA,eAAe,oBAAoB,UAAU;;;;;ACP7C;;;AAEA,aAAO,UAAU,oBAAoB,QAAQ,EAAC,EAAG;;;;;ACFjD,gCAEM,cAkBe;AApBrB;AAAA;AAAA,iCAA8B;AAE9B,MAAM,eAAN,cAA2B,iCAAQ;AAAA,QAC/B,QAAQ,UAAU;AACd,gBAAM,SAAS,KAAK;AACpB,gBAAM,QAAQ,OAAO,MAAM,SAAS,UAAU,cAAc;AAC5D,gBAAM,UAAU,MAAM,MAAM;AAC5B,iBAAO,MAAM,OAAO,YAAU;AAC1B,kBAAM,SAAS,OAAO,cAAc,WAAW;AAC/C,mBAAO,WAAW,oBAAoB,QAAQ,KAAK;AACnD,mBAAO,OAAO,QAAQ,SAAS,OAAO;AACtC,kBAAM,UAAU,OAAO,QAAQ;AAC/B,kBAAM,CAAC,eAAe,YAAY,IAAI,QAAQ,MAAM,yBAAyB;AAC7E,mBAAO,QAAQ,aAAa;AAC5B,kBAAM,EAAC,aAAa,cAAc,SAAQ,IAAI,OAAO;AACrD,qBAAS,EAAC,eAAe,cAAc,aAAa,cAAc,SAAQ,CAAC;AAAA,UAC/E,CAAC;AAAA,QACL;AAAA,MACJ;AAEA,MAAqB,QAArB,cAAmC,gCAAO;AAAA,QACtC,WAAW,aAAa;AACpB,iBAAO;AAAA,QACX;AAAA,QACA,OAAO;AACH,eAAK,OAAO,SAAS,IAAI,aAAa,IAAI,aAAa,KAAK,MAAM,CAAC;AAAA,QACvE;AAAA,MACJ;AAAA;AAAA;;;AC3BA;;;AAEA,aAAO,UAAU,oBAAoB,QAAQ,EAAC,EAAG;;;;;ACFjD;;;AAEA,aAAO,UAAU,oBAAoB,QAAQ,EAAC,EAAG;;;;;ACFjD;;;AAEA,aAAO,UAAU,oBAAoB,qBAAqB,EAAC,EAAG;;;;;ACF9D;;;AAEA,aAAO,UAAU,oBAAoB,qBAAqB,EAAC,EAAG;;;;;ACF9D;;;AAEA,aAAO,UAAU,oBAAoB,qBAAqB,EAAC,EAAG;;;;;ACF9D;;;AAEA,aAAO,UAAU,oBAAoB,QAAQ,EAAC,EAAG;;;;;ACFjD;;;AAEA,aAAO,UAAU,oBAAoB,qBAAqB,EAAC,EAAG;;;;;ACF9D,MACM,uBAGA,kBAEA,sBAKA,yBASO;AApBb;AAAA;AACA,MAAM,wBAAwB,MAAM;AAChC,eAAO,SAAS,kBAAkB,mBAAmB,EAAE,CAAC,EAAE;AAAA,MAC9D;AACA,MAAM,mBAAmB,cACrB,sBAAsB,EAAE,cAAc,QAAQ;AAClD,MAAM,uBAAuB,CAAC,aAAa,eAAe,aAAa;AAAA,QACnE,kCAAkC,WAAW,+BAA+B,UAAU;AAAA,MAC1F,IAAI;AAAA,QACA,kCAAkC,WAAW;AAAA,MACjD;AACA,MAAM,0BAA0B,QAAM;AAClC,YAAI,CAAC,MAAM,CAAC,GAAG,SAAS;AAEpB,iBAAO;AAAA,QACX;AAEA,eAAO,GAAG,QAAQ,wBAAwB,KAAK,wBAAwB,GAAG,UAAU;AAAA,MACxF;AAEO,MAAM,wBAAwB,CAAC,aAAa,eAAe;AAC9D,cAAM,UAAU,qBAAqB,aAAa,UAAU;AAC5D,cAAM,gBAAgB,UAAU,wBAAwB,QAAQ,UAAU,IAAI;AAE9E,eAAO;AAAA,UACH,mBAAmB;AAAA,YACf;AAAA,YACA;AAAA,UACJ;AAAA,UACA,kBAAkB,gBAAgB;AAAA,YAC9B,aAAa,cAAc,aAAa,8BAA8B;AAAA,YACtE,YAAY,cAAc,aAAa,yBAAyB;AAAA,UACpE,IAAI;AAAA,YACI,aAAa,sBAAsB,WAAW;AAAA,YAC9C,YAAY;AAAA,UAChB;AAAA,QACR;AAAA,MACJ;AAAA;AAAA;;;ACrCA,oBACA,mBACA,4BACA,2BAEA,mCACA,oBACA,4BAYqB;AAnBrB;AAAA;AAAA,qBAAmC;AACnC,0BAAsB;AACtB,mCAAyB;AACzB,kCAAmB;AAEnB,0CAA6B;AAC7B,2BAAsB;AACtB,mCAAsB;AACtB;AAWA,MAAqB,iBAArB,cAA4C,2BAAc;AAAA,QAA1D;AAAA;AAKI,6CAAc,CAAC,EAAC,cAAc,aAAa,cAAc,SAAQ,MAAM;AACnE,iBAAK,MAAM,eAAe;AAAA,cACtB;AAAA,gBACI,MAAM;AAAA,gBACN,SAAS;AAAA,gBACT,SAAS;AAAA,kBACL,GAAG,sBAAsB,aAAa,KAAK,MAAM,UAAU;AAAA,kBAC3D,UAAU,SAAS;AAAA,kBACnB,MAAM;AAAA,oBACF,YAAY;AAAA,sBACR,CAAC,YAAY,GAAG;AAAA,oBACpB;AAAA,kBACJ;AAAA,gBACJ;AAAA,cACJ;AAAA,YACJ,CAAC;AACD,iBAAK,MAAM,qBAAqB,aAAa,KAAK,MAAM,UAAU;AAAA,UACtE;AACA,6CAAc,MAAM;AAChB,kEAAe,aAAa,KAAK,WAAW;AAAA,UAChD;AAAA;AAAA,QACA,SAAS;AACL,gBAAM,QAAQ;AAAA,YACV,SAAS,KAAK;AAAA,YACd,UAAU,QAAQ,KAAK,MAAM,QAAQ;AAAA,YACrC,OAAO,KAAK,MAAM,aAAa,UAAU,KAAK,MAAM,OAAO;AAAA,YAC3D,MAAM,KAAK,MAAM;AAAA,UACrB;AACA,iBAAO,6BAAAA,QAAA,cAAC,yCAAY,GAAG,OAAO;AAAA,QAClC;AAAA,MACJ;AAlCI,oBADiB,gBACV,aAAY;AAAA,QACf,cAAc,kBAAAC,QAAU;AAAA,QACxB,SAAS,kBAAAA,QAAU;AAAA,MACvB;AAJiB,uBAArB;AAAA,YATC,4BAAQ,YAAU;AAAA,UACf,YAAY,MAAM,GAAG,MAAM,QAAQ;AAAA,QACvC,IAAI;AAAA,UACA,gBAAgB,mCAAQ,QAAQ;AAAA,UAChC,sBAAsB,mCAAQ,GAAG,MAAM;AAAA,QAC3C,CAAC;AAAA,YACA,gCAAK,qBAAmB;AAAA,UACrB,cAAc,eAAe,IAAI,MAAM;AAAA,QAC3C,EAAE;AAAA,SACmB;AAAA;AAAA;;;ACnBrB;AAAA,MAIM;AAJN,MAAAC,iBAAA;AAAA;AAAA;AACA;AACA;AAEA,MAAM,YAAY,CAACC,SAAQ,cAAc,CAAC,uBAAuB,YAAY;AACzE,YAAI,CAAC,aAAa,UAAU,QAAQ,eAAe,OAAO,GAAG;AACzD,gCAAsB,UAAU,sBAAsB,WAAW,CAAC;AAClE,iBAAO;AAAA,YACH,GAAG;AAAA,YACH,SAAS;AAAA,cACL,GAAI,sBAAsB,WAAW,CAAC;AAAA,cACtCA;AAAA,YACJ;AAAA,UACJ;AAAA,QACJ;AACA,eAAO;AAAA,MACX;AAEA,mBAAS,0BAA0B,CAAC,GAAG,oBAAkB;AACrD,cAAM,kBAAkB,eAAe,IAAI,WAAW,EAAE,IAAI,iBAAiB;AAE7E,wBAAgB,IAAI,YAAY;AAAA,UAC5B,aAAa;AAAA,UACb,WAAW;AAAA,UACX,MAAM;AAAA,UACN,SAAS;AAAA,UACT,WAAW,mBAAiB,eAAe,YAAY;AAAA,QAC3D,GAAG,eAAe;AAElB,cAAM,SAAS,eAAe,IAAI,WAAW,EAAE,IAAI,QAAQ;AAC3D,eAAO,IAAI,YAAY,UAAU,KAAW,CAAC;AAAA,MACjD,CAAC;AAAA;AAAA;;;AC/BD;",
  "names": ["React", "PropTypes", "init_manifest", "Plugin"]
}
